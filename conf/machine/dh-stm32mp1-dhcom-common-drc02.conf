#@TYPE: Machine
#@NAME: DH STM32MP1 DHCOM SoM on Avenger96 carrier board
#@SOC:  ST STM32MP1
#@DESCRIPTION: Machine configuration for DH STM32MP1 DHCOM SoM on Avenger96 carrier board

require conf/machine/include/dh-stm32mp1-common.inc

MACHINEOVERRIDES_append=":dh-stm32mp1-dhcom-drc02:dh-stm32mp1-dhcom-common-drc02:"

# U-Boot bootloader
UBOOT_MACHINE = "stm32mp15_dhcom_basic_defconfig"
UBOOT_DTB_LOADADDRESS = "0xcff00000"
UBOOT_DTBO_LOADADDRESS = "0xcff80000"

# U-Boot

PREFERRED_PROVIDER_virtual/bootloader = "u-boot-stm32mp1-dhsom"
PREFERRED_PROVIDER_u-boot = "u-boot-stm32mp1-dhsom"
PREFERRED_PROVIDER_u-boot-native = "u-boot-stm32mp1-dhsom"
PREFERRED_PROVIDER_u-boot-fw-utils = "u-boot-stm32mp1-dhsom-fw-utils"
PREFERRED_PROVIDER_u-boot-fw-utils-native = "u-boot-stm32mp1-dhsom-fw-utils-native"
PREFERRED_VERSION_u-boot = "2020.07%"
PREFERRED_VERSION_u-boot-native = "2020.07%"
PREFERRED_VERSION_u-boot-fw-utils = "2020.07%"
PREFERRED_VERSION_u-boot-fw-utils-native = "2020.07%"

# Linux kernel
KERNEL_DEVICETREE = " \
	stm32mp153c-dhcom-drc02.dtb \
	"

KERNEL_DEFCONFIG = "stm32mp1_dhsom_drc02_defconfig"
PREFERRED_PROVIDER_virtual/kernel = "linux-stm32mp1-dhsom"
PREFERRED_VERSION_linux-stm32mp1-dhsom = "5.4%"


IMAGE_INSTALL_remove = "u-boot-mainline"
IMAGE_INSTALL_append = "u-boot-stm32mp1-dhsom"
